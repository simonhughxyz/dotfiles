{{- if eq .chezmoi.os "windows" -}}
# vim: ft=ps1

Write-Host "Initiating Windows setup..."

$Modules = @(
  "PSWindowsUpdate",
  "PSFzf",
  "Terminal-Icons",
  "BurntToast"
)

$scoop = @(
  "chezmoi",
  "curl",
  "git",
  "neovim-nightly",
  "starship",
  "vieb",
  "brave",
  "firefox",
  "mpv",
  "fzf",
  "nerd-fonts/Hack-NF-Mono",
  "win32yank",
  "zoxide",
  "jq",
  "yq",
  "main/python"
  "main/pipx"
)

Write-Host "Starting Module Install..."
$Modules | ForEach-Object { Write-Host ("Installing {0}..." -f $_); Install-Module -Name $_ -Force }

Write-Host "Starting Windows Update..."
Install-WindowsUpdate -AcceptAll

if ( -not (Get-Command -Name scoop)){
# Install scoop
  iex "& {$(irm get.scoop.sh)} -RunAsAdmin"
}

scoop update

scoop bucket add main
scoop bucket add extras
scoop bucket add versions
scoop bucket add nerd-fonts

Write-Host "Starting Scoop Install..."
$scoop | ForEach-Object { write-host ("Installing {0}..." -f $_ ); scoop install $_ }

{{- end -}}
